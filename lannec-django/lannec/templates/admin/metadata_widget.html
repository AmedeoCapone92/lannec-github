<div class="metadata-widget">
    {{ widget.content|safe }}
</div>
<script>
document.addEventListener('DOMContentLoaded', () => {
    const customFieldsContainer = document.getElementById('custom-fields');
    const addFieldButton = document.getElementById('add-custom-field');

    addFieldButton.addEventListener('click', () => {
        const fieldName = prompt("Enter the key for the new custom field:");
        if (fieldName) {
            const fieldHtml = `
                <div class="custom-field">
                    <label for="id_${fieldName}">${fieldName}</label>
                    <input type="text" name="metadata[${fieldName}]" id="id_${fieldName}" />
                    <button type="button" class="remove-field">Remove</button>
                </div>`;
            customFieldsContainer.insertAdjacentHTML('beforeend', fieldHtml);
        }
    });

    customFieldsContainer.addEventListener('click', (e) => {
        if (e.target.classList.contains('remove-field')) {
            e.target.parentElement.remove();
        }
    });
});
</script>
